var Parser = require('./parser');

var AttributeLinker = require('./attributeLinker');
Parser.register(function parseTextContent(node){
	if( node.nodeType != 3 ) return false;

	return AttributeLinker.new('textContent', node.textContent);
});

var LinkerListLinker = require('./linkerListLinker');
Parser.register(function parseAttributes(node){
	if( node.nodeType != 1 ) return false;

	var attributes = node.attributes, i = 0, j = attributes.length, attr, linker, linkerlist = [];

	for(;i<j;i++){
		attr = attributes[i];
		linker = AttributeLinker.new(attr.name, attr.value);
		if( linker ){
			linkerlist.push(linker);
		}
	}

	if( linkerlist.length === 0 ) return false;
	if( linkerlist.length === 1 ) return linkerlist[0];
	return LinkerListLinker.new(linkerlist);
});

var SubTemplateLinker = require('./subTemplateLinker');
Parser.register(function parseSubTemplate(node){
	if( window.HTMLTemplateElement.isTemplate(node) ){
		return SubTemplateLinker.new(node);
	}
});

module.exports = Parser;