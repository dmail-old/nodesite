/*

*/

var PATH = require('path');
var args = require('argv').parse(process.argv);

var options = {
	autoWatch: args.keepalive || false,
	path: PATH.resolve(process.cwd(), args.path),
	profile: args.profile || false
};

var nodetest = require('../nodetest');
var LogStream = require('LogStream');
var logger = LogStream.create();

if( options.autoWatch ){
	require('net').createServer().listen(); //process.stdin.resume(); // keep process alive
}

nodetest.testFolder(options.path, logger, options.autoWatch);