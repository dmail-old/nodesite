var proto = require('proto');
var debug = require('debug');
var toSize = require('./toSize');

var CellLayout = proto.extend({
	computedWidth: null,
	offsetWidth: null,
	minWidth: 0,
	maxWidth: Infinity,
	width: null,

	constructor: function(cell, availableWidth){
		this.cell = cell;

		this.computedWidth = cell.style.width === 'auto' ? this.computeWidth(cell) : toSize(cell.style.width, availableWidth);
		this.minWidth = toSize(cell.style.minWidth, availableWidth);
		this.maxWidth = toSize(cell.style.maxWidth, availableWidth);

		var width = this.computedWidth;
		width = Math.max(this.minWidth, width);
		width = Math.min(this.maxWidth, width);

		this.width = width;
	},

	computeWidth: function(cell){
		var width = cell.value.length;

		width+= cell.style.paddingLeft;
		width+= cell.style.paddingRight;

		return width;
	}
});

module.exports = CellLayout;