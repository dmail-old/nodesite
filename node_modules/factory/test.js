var proto = require('proto');

exports['factory create product from a product model'] = function(test, Factory){	
	var factory = Factory.create();

	factory.add({
		constructor: function(){
			this.foo = 'bar';
		}
	});

	var productModel = {
		constructor: function(){
			this.name = 'foo';
		}
	};

	var product = factory.createProduct(productModel);

	product.constructor();

	test.equal(product.name, 'foo');
	test.equal(product.foo, 'bar');
};


exports['factory can pack created product'] = function(test, Factory){
	var factory = Factory.create();

	factory.effects = {
		'foo': function(product, value){
			product.foo = value + 'bat';
		}
	};

	factory.add({
		foo: 'bar'
	});

	var product = factory.createProduct({});
	factory.pack(product);

	test.equal(product.foo, 'barbat');
};
