# notifier

Inspired from [js-signals](https://github.com/millermedeiros/js-signals)

## Example

```javascript
var notifier = require('notifier').create();

notifier.add(console.log, console);
notifier.notify('foo', 'bar'); // logs 'foo bar' 
```

## Callable

Notifier use this object internally, a callable wrap a listener/bind duo.

## Callable.create(listener, bind = null, isOnce = false)

Returns a callable object for the listener/bind duo.  
listener can be a function with an optional bind.  
listener can be an object (in case bind is a required method name).  
isOnce indicates if the callable wants to be removed just after being called.

```javascript
var Callable = require('notifier').Callable;
var consoleFunctionCall = Callable.create(console.log, console);
var consoleMethodCall = Callable.create(console, 'log');

consoleFunctionCall.call('foo', 'bar'); // logs 'foo bar'
consoleFunctionCall.apply(['foo', 'bar']); // logs 'foo bar'
consoleMethodCall.call('foo', 'bar'); // logs 'foo bar'
```

## getCall(listener, bind = null)

Returns the callable object for the duo listener/bind or null.

```javascript
function foo(){};

notifier.add(foo, null, true);
notifier.add(foo, {});

var call = notifier.getCall(foo);

call.fn; // foo
call.isOnce; // true
```

## has(listener, bind = null)

Returns if the duo listener/bind exists for this notifier.

```javascript
function foo(){};
notifier.has(foo); // false
notifier.add(foo);
notifier.has(foo); // true
```

## add(listener, bind = null, once = false)

Register the duo listener/bind (duplicate listeners are removed).  
If once is true, the listener will be removed just before being called.  

```javascript
var notifier = require('notifier').create();

notifier.add(console.log, console);
notifier.add({foo: function(){ console.log('foo'); }}, 'foo');
notifier.add(function(){ console.log('once');  }, null, true);

notifier.notify('boo'); // logs 'boo', 'foo', 'once'
notifier.size; // 2
notifier.notify('boo'); // logs 'boo', 'foo'
```

## addOnce(listener, bind)

Shortcut to add a listener once.

## remove(listener, bind = null)

Remove the duo listener/bind from the notifier.

## notify(...)

Call listeners with the provided arguments

## prevent()

Prevent next listeners from being called

```javascript
notifier.add(function(){ notifier.prevent(); });
notifier.add(function(){ console.log('here'); });
notifier.notify(); // nothing is logged
```

## disable()

notify() will have no effect

## enable()

Restore notify() behaviour

## clear()

Remove all listeners & remove all references to external/internal objects

## size

The number of listeners for this notifier

## args

Curried arguments

```javascript
var notifier = require('notifier').create();
notifier.args = ['foo'];
notifier.add(console.log, console);
notifier.notify('bar'); // logs 'foo bar'
```

## memorize

Save arguments when notify() is called and call immediatly listeners when added.

```javascript
var notifier = require('notifier').create();

notifier.memorize = true;

notifier.
```

## forget()

Use with memorize, forget previously saved arguments

```javascript
var object = {
  paused: Notifier.create(),
  resumed: Notifier.create(),
  
  pause: function(){
    this.resumed.forget();
    this.paused.notify('pause');
  },
  
  resume: function(){
    this.paused.forget();
    this.resumed.notify('resume');
  }
};

object.paused.memorize = true;
object.resumed.memorize = true;

object.pause();
object.paused.add(console.log); // logs 'pause' because paused.notify() was called
object.resume();
object.paused.add(console.log); // logs nothing because paused.forget() was called by resume
```





