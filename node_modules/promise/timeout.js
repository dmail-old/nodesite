require('promise');

function timeout(ms){
	var timer = null;
	var expire;
	var promise = new Promise(function(resolve){
		expire = resolve;
		timer = setTimeout(expire, ms);
	});

	promise.expire = expire;
	promise.clearTimeout = function(){
		clearTimeout(timer);
		timer = null;
	};

	return promise;
}

module.exports = timeout;
Promise.timeout = timeout;
