require('promise');

function fromStream(stream){
	var buffers = [];

	return new Promise(function(resolve, reject){
		stream.on('data', function(data){
			buffers.push(data);
		});
		stream.on('end', function(){
			resolve(Buffer.concat(buffers));
		});
		stream.on('error', reject);
	});
}

module.exports = fromStream;
Promise.fromStream = fromStream;