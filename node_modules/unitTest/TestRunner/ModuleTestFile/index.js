var TestSerie = require('../TestSerie');

var ModuleTestFile = TestSerie.create({
	path: null,
	module: null,

	init: function(path){	
		this.path = path;
		this.setExportedTests(this.load(this.path));
	},	

	load: function(path){
		return require(path);
	},

	unload: function(path){
		delete require.cache[path];
	},

	reload: function(){
		this.unload(this.path);
		this.setExportedTests(this.load(this.path));
	},

	setExportedTests: function(exports){
		this.tests = [];
		
		for(var name in exports){
			this.add(name, exports[name]);
		}
	},

	setModule: function(module){
		this.tests.forEach(function(test){
			test.module = module;
		});
		this.module = module;
	},
});

module.exports = ModuleTestFile;