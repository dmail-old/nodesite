var proto = require('@dmail/proto');
var forOf = require('for-of');
var Task = require('./task');
require('task/complete');

function pipe(iterable, bind, initialValue){
	var task = Task.complete(initialValue);
	task.name = 'initial';

	forOf(iterable, function(fn){
		task = task.then(fn, null, bind);
	});

	return task;
}

module.exports = pipe;
Task.pipe = pipe;