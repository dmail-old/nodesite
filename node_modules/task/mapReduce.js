var Task = require('task');
require('task/reduce');
require('task/call');
require('iterator/map');

function mapReduce(iterable, fn, bind, initialValue){

	iterable = Iterator.map(iterable, function(value, index, iterable){
		return Task.call(fn, bind, value);
	}, bind);

	return Task.reduce(iterable, initialValue);
}

module.exports = mapReduce;
Task.mapAny = mapReduce;