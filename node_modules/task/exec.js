var Task = require('./task');
require('task/complete');
require('task/fail');

function exec(fn, bind, value){
	var ret, error;

	if( typeof fn != 'function' ){
		throw new TypeError('function expected ' + fn + ' given');
	}

	try{
		ret = fn.call(bind, value);
	}
	catch(e){
		error = e;
	}

	return error ? Task.fail(error) : Task.complete(ret);
}

module.exports = exec;
Task.exec = exec;