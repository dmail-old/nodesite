exports['testing task'] = function(test, Task){
	function increment(a){ return a + 1; }
	function decrement(a){ return a - 1; }

	var incrementTask = Task.create(increment);
	var decrementTask = Task.create(decrement);
	var parallel = Task.parallel([incrementTask, decrementTask]);
	var serie = Task.serie([incrementTask, decrementTask]);
	var reduce = Task.reduce([incrementTask, decrementTask]);

	test.willBe(incrementTask.spawn(10), 11);
	test.willBe(reduce.spawn(10), 10);
	test.willBe(serie.spawn(10).then(String), '11,10');
	test.willBe(parallel.spawn(10).then(String), '11,9');
};

exports['testing task structure'] = function(test, Task){
	var i = 1;
	var collect = Task.create(function(value){
		if( i === 0 ) return Promise.resolve(value);
		i--;
		return Task.map(['a', 'b'], collect);
	});

	var process = collect.spawn(10);

	process.then(function(){
		console.log(process.children.length, process.value);
	});
};

exports['testing reaction'] = function(test, Task){
	var reaction = {
		start: function(){
			console.log('starting with', this.value);
		},

		progress: function(childProcess){
			console.log(childProcess.task.name, 'done, value = ', childProcess.value);
		},

		pass: function(){
			console.log('passed with', this.value);
		},

		increment: {
			start: function(){
				console.log('incrementing', this.value);
			}
		},

		decrement: {
			start: function(){
				console.log('decrementing', this.value);
			}
		}
	};
	//serie.reaction = reaction;
	//serie.spawn(10);
};