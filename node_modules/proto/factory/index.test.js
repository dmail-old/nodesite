var proto = require('proto');

exports['factory produce'] = function(test, ProtoFactory){
	var factory = ProtoFactory.create();

	factory.add({
		constructor: function(){
			this.foo = 'bar';
		}
	});

	var product = factory.produce({
		constructor: function(){
			this.name = 'foo';
		}
	});

	product.constructor();

	test.equal(product.name, 'foo');
	test.equal(product.foo, 'bar');
};


exports['factory refine'] = function(test, ProtoFactory){
	var factory = ProtoFactory.create();

	factory.effects = {
		'foo': function(product, value){
			product.foo = value + 'bat';
		}
	};

	factory.add({
		foo: 'bar'
	});

	var product = factory.produce({});
	factory.refine(product);

	test.equal(product.foo, 'barbat');
};
