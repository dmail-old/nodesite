# proto

Wrap object creation & instantiation

## Example

```javascript
var proto = require('proto');

var User = proto.extend({
	name: null,

	constructor: function(name){
		this.name = name;
	},

	get firstLetter(){
		return this.name[0];
	}
});

// create a user
var user = User.create('foo');

Object.getPrototypeOf(user); // User
User.isPrototypeOf(user); // true
user.firstLetter; // 'f'

var Admin = User.extend({
	type: 'admin'
});

// create an admin
var admin = Admin.create('bar');

Object.getPrototypeOf(admin); // Admin
User.isPrototypeOf(admin); // true
admin.firstLetter; // 'b'
```

## Extending constructor

```javascript
function User(){};
var Admin = User.extend(); // or proto.extend.call(User)
```

## Create constructor instance

```javascript
function User(){};
var user = User.create(); // or proto.create.call(User);
```

## Calling a parent method

```javascript
var User = proto.extend({
	foo: function(){
		console.log('foo');
	}
});
var Admin = User.extend({
	foo: function(){
		Admin.super.foo.call(this); // or User.foo.call(this);
	}
});
```

## Custom instantiation logic

You can capture instance creation by redefining the 'create' method:

```javascript
var Parser = proto.extend({
	cache: {},

	hasCache: function(expression){
		return expression in this.cache;
	},

	create: function(expression){
		// returns an existing cached instance
		if( this.hasCache(expression) ){
			return this.cache[expression];
		}
		// return the newly cached instance
		else{
			return this.cache[expression] = Parser.super.create.call(this, expression);
		}
	},

	expression: null,
	constructor: function(expression){
		this.expression = null;
	}
});

var parser_a = Parser.create('hello');
var parser_b = Parser.create('hello');
var parser_c = Parser.create('world');

parser_a == parser_b; // true
parser_a == parser_c; // false
Parser.cache['hello'] == parser_a; // true
Parser.cache['world'] == parser_c; // true
```

## Browser compatibility

All browsers are supported but stuff* related to custom properties depends on [Object.defineProperty compat](http://kangax.github.io/es5-compat-table/#Object.defineProperty) :
 - Firefox 5+
 - Chrome 4+
 - Internet Explorer 9+
 - Opera 11.6+
 - Safari 5.1+

(*) In an environment without Object.defineProperty basic stuff works but the following cannot be used (get firstLetter(), Object.defineProperty, Object.getOwnPropertyDescriptor, ...)
