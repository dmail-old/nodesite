var ansi = {
	tags: {
		//styles
		bold: ['\033[1m', '\033[22m'],
		italic: ['\033[3m', '\033[23m'],
		underline: ['\033[4m', '\033[24m'],
		inverse: ['\033[7m', '\033[27m'],
		//grayscale
		white: ['\033[37m', '\033[39m'],
		grey: ['\033[90m', '\033[39m'],
		black: ['\033[30m', '\033[39m'],
		//colors
		blue: ['\033[34m', '\033[39m'],
		cyan: ['\033[36m', '\033[39m'],
		green: ['\033[32m', '\033[39m'],
		magenta: ['\033[35m', '\033[39m'],
		red: ['\033[31m', '\033[39m'],
		yellow: ['\033[33m', '\033[39m']
	},
	styles: {},

	defineStyle: function(name, properties){
		if( typeof properties == 'string' ) properties = {color: properties};
		this.styles[name] = properties;
		if( !(name in this) ){
			this[name] = function(str){
				return this.setStyle(str, name);
			};
		}
	},

	stylize: function(str, name){
		var tag = this.tags[name];
		if( tag ) str = tag[0] + str + tag[1];
		return str;
	},

	setStyle: function(str, name){
		var key, properties = this.styles[name];

		for(key in properties){
			str = this.stylize(str, properties[key]);
		}

		return str;
	},

	removeStyles: function(str){
		return String(str).replace(/\u001b\[\d+m/g, '');
	}
};

Object.keys(ansi.tags).forEach(function(tagName){
	ansi[tagName] = function(str){
		return this.stylize(str, tagName);
	};
});

module.exports = ansi;