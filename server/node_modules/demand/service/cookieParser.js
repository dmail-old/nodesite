var CookieParser = {
	cookieSource: '',
	cookieParams: {},
	cookieModule: require('cookie'),

	setCookie: function(options){
		var cookies = this.headers['Set-Cookie'];

		if( typeof cookies == 'string' ){
			cookies = [cookies];
		}
		else if( !Array.isArray(cookies) ){
			cookies = [];
		}

		var cookie = this.cookieModule.new(options);

		cookies.push(cookie.toString());

		this.setHeader('Set-Cookie', cookies);
	},

	parseCookie: function(cookies){
		try{
			return this.cookieModule.parseAll(cookies);
		}
		catch(e){
			return e;
		}
	}
};

module.exports = CookieParser;