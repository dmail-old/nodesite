var Emitter = require('emitter');

var ElementEventNotifier = Emitter.Notifier.create({
	element: null,

	init: function(name, element){
		Emitter.Notifier.call(this, name);
		this.element = element;
	},

	handleEvent: function(e){
		this.notify(e);
	},

	open: function(){
		this.element.addEventListener(this.name, this);
	},

	close: function(){
		this.element.removeEventListener(this.name, this);
	}
});

var ElementEventEmitter = Emitter.create({
	Notifier: ElementEventNotifier,
	element: null,
	
	init: function(element, bind){
		this.element = element;
		Emitter.init.call(this, bind || element);
	},

	createNotifier: function(name){
		return this.ElementEventNotifier.new(name, this.element);
	}
});

module.exports = ElementEventEmitter;