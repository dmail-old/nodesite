var proto = require('proto');
var Emitter = require('emitter');

var ElementEventNotifier = proto.extend(Emitter.Notifier, {
	element: null,

	constructor: function(name, element){
		Emitter.Notifier.call(this, name);
		this.element = element;
	},

	handleEvent: function(e){
		this.notify(e);
	},

	open: function(){
		this.element.addEventListener(this.name, this);
	},

	close: function(){
		this.element.removeEventListener(this.name, this);
	}
});

var ElementEventEmitter = proto.extend(Emitter, {
	Notifier: ElementEventNotifier,
	element: null,
	
	constructor: function(element, bind){
		this.element = element;
		Emitter.init.call(this, bind || element);
	},

	createNotifier: function(name){
		return this.ElementEventNotifier.new(name, this.element);
	}
});

module.exports = ElementEventEmitter;