var proto = require('proto');
var Emitter = require('emitter');

var ElementEventNotifier = Emitter.Notifier.extend({
	element: null,

	constructor: function(name, element){
		ElementEventNotifier.super.constructor.call(this, name);
		this.element = element;
	},

	handleEvent: function(e){
		this.notify(e);
	},

	open: function(){
		this.element.addEventListener(this.name, this);
	},

	close: function(){
		this.element.removeEventListener(this.name, this);
	}
});

var ElementEventEmitter = Emitter.extend({
	Notifier: ElementEventNotifier,
	element: null,

	constructor: function(element, bind){
		this.element = element;
		ElementEventEmitter.super.constructor.call(this, bind || element);
	},

	createNotifier: function(name){
		return this.ElementEventNotifier.create(name, this.element);
	}
});

module.exports = ElementEventEmitter;