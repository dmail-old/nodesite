var Element = require('Element');

if( 'classList' in Element.prototype === false ){
	var TokenList = require('TokenList');
	var ClassList = TokenList.extend({
		element: null,

		init: function(element){
			this.element = element;
			return TokenList.init.call(this, element.className);
		},

		update: function(){
			this.element.className = this.toString();
		}
	});

	Object.defineProperty(Element.prototype, 'classList', {
		get: function(){
			return ClassList.new(this);
		}
	});
}

Element.implement({
	hasClass: function(name){
		return this.classList.contains(name);
	},

	addClass: function(name){
		this.classList.add(name);
		return this;
	},

	removeClass: function(name){
		this.classList.remove(name);
		return this;
	},

	toggleClass: function(name, force){
		if( force === undefined ) force = !this.hasClass(name);
		return force ? this.addClass(name) : this.removeClass(name);
	}
});
