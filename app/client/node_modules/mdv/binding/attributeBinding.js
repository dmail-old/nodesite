var NodeBinding = require('./nodeBinding');
var AttributeBinding = NodeBinding.extend({
	conditionalEnd: '?',
	conditional: false,

	create: function(element, attrName, model, path){
		this.conditional = attrName.endsWith(this.conditionalEnd);

		if( this.conditional ) {
			element.removeAttribute(attrName);
			attrName = attrName.slice(0, - this.conditionalEnd.length);
		}

		NodeBinding.create.call(this, element, attrName, model, path);
	},

	valueChanged: function(value) {
		if( this.conditional ){
			if( value ){
				this.node.setAttribute(this.property, '');
			}
			else{
				this.node.removeAttribute(this.property);
			}
		}
		else{
			this.node.setAttribute(this.property, this.encodeValue(value));
		}
    }
});

module.exports = AttributeBinding;