TemplateCompiler
================

Collect an array of linker from a dom node.

## Example

```html
<template id="test">
    Hello {name}, your color is <span style="color:{color}">{color}</span>
</template>

<script>
var TemplateCompiler = require('mdv/Template/TemplateCompiler');
var templateCompiler = TemplateCompiler.new($('test'));
var linkers = templateCompiler.parse();

// linkers
[
  TokenLinker, // Hello {name}, your color is 
  TokenLinker, // color:{color}
  DirectLinker // {color}
]
</script>
```

## Requirements

- [Linker](./Linker)
- [DirectLinker](./DirectLinker)
- [TokenLinker](./TokenLinker)
- [TokenListLinker](./TokenListLinker)
- [SubTemplateLinker](./SubTemplateLinker)
- [LinkerListLinker](./LinkerListLinker)
- [StringTemplate.Parser](https://github.com/dmail/nodesite/tree/master/app/node_modules/StringTemplate#stringtemplateparser)
- mdv

## parsers

Array of directive.

## register(directive)

Register a directive : a function indicating if a node needs a linker, example :

```javascript
TemplateCompiler.register(function(node){
  if( node.nodeType == 3 && node.textContent == '{color}' ){
    return DirectLinker.new('textContent', 'color');
  }
  return false;
});
```

## parse(element, descendantOnly)

Returns linkers found for node and all his descendant. Pass descendantOnly to ignore node.

## collect(node, path)

Returns an array of linker found for node and all his descendant.  
path is the location of node relative to the element passed to parse(element). (see [getNodeAtPath(path)](https://github.com/dmail/nodesite/tree/master/app/client/node_modules/mdv/Template/TemplateInstance#nodepropertiesgetnodeatpathpath))

## collectNodeList(nodeList, path)

Iterate on nodeList and call collect on each node.  
Returns an array of all linker found for all nodes.

## collectChildNodes(node, path)

Equivalent of collectNodeList(node.childNodes, path);

## Directives

Object holding directives by name

## Directives.parseAttribute(attrName, attrValue)

This directive is an helper and is not made to registered. The following table shows what is returned :

attrValue                                     | return
--------------------------------------------- | -----------------
{name}                                        | [directLinker](./DirectLinker)
{name} !                                      | [tokenLinker](./TokenLinker)
Hello: {name}                                 | [tokenLinker](./TokenLinker)
Hello {name}, you are {age} years old         | [tokenListLinker](./TokenListLinker)
Hello foo, how are you?                       | false

## Directives.parseTextContent(node)

If node is a textNode return the result of Directives.parseAttributes with attrName = 'textContent' and attrValue =  node.textContent.

## Directives.parseAttributes(node)

Iterate over node attributes and collect the result of Directives.parseAttribute over each attribute.   
Depending of the number of linker found, this function returns 

length  | return
------- | ---------------
0       | false
1       | result of Directives.parseAttribute (directLinker, tokenLinker or tokenListLinker)
> 1     | [linkerListLinker](./LinkerListLinker)

## Directives.parseSubTemplate(node)

If the node is meant to be used as a template, return a [subTemplateLinker]()
