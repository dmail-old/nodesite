require('../Node.bind');
var Linker = require('../Linker');
var proto = require('@dmail/proto');

/*

name: DirectLinker
description: link a node attribute to a model value
example: <span>{name}</span>

*/
var DirectLinker = proto.extend.call(Linker, {
	name: 'DirectLinker',
	nodeAttribute: null, // string, the HTMLElement attribute name ('textContent', 'class')
	modelPath: null, // string, path to the model value ('name', 'user.name')

	constructor: function(nodeAttribute, modelPath){
		this.nodeAttribute = nodeAttribute;
		this.modelPath = modelPath;
	},

	link: function(node, model){
		node.bind(this.nodeAttribute, model, this.modelPath);
	},

	unlink: function(node, model){
		node.unbind(this.nodeAttribute);
	},

	namedScope: function(path, search){
		this.modelPath = this.getNamedScopePath(this.modelPath, path, search);
	}
});

module.exports = DirectLinker;