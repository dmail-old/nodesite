var Selector = require('Selector');
var Collector = require('Collector');
var NodeTraversal = require('./NodeTraversal');

var NodeFinder = {
	match: function(){
		var i = 0, j = arguments.length;

		for(;i<j;i++){
			if( Selector.new(arguments[i]).match(this) ) return true;
		}

		return false;
	}
};

Object.eachPair(NodeTraversal, function(name, iterator){
	if( typeof iterator != 'function' ) return;

	NodeFinder['get' + name.capitalizeFirst()] = function(selector, all){
		if( typeof selector == 'undefined' ){
			selector = true;
		}

		selector = Selector.new(selector);
		var collector = Collector.new();

		collector.multiple = all;
		collector.matcher = selector.match;
		collector.matcherBind = selector;
		collector.iterator = iterator;
		collector.iteratorBind = this;

		return collector.collect();
	};
});

module.exports = NodeFinder;