Emitter
=============

Emit and listen events

## Example

```javascript
var Emitter = require('Emitter');
var customEmitter = Emitter.new();
var readListener = function(){};

// get listeners
customEmitter.listeners('read');
// add listener
customEmitter.on('read', readListener);
// remove listener
customEmitter.off('read', readListener);
// add volatile listener
customEmitter.once('read', readListener);
// call listeners
customEmitter.emit('read', 'hello', 'world');
// apply listeners
customEmitter.applyListeners('read', ['hello', 'world']);

// add listener for each added listener
customEmitter.on('addListener', function(event, listener){});
// add listener for each removed listener
customEmitter.on('removeListener', function(event, listener){});
// add listener for all events
customEmitter.on('*', function(event, args){});
```

## Requirements:

- [Object.prototype.new](https://github.com/dmail/nodesite/tree/master/app/node_modules/core/Object.prototype.new) but Emitter.new() is equivalent to Object.create(Emitter).create();
- [Array.slice()](https://github.com/dmail/nodesite/blob/master/app/node_modules/core/array.js#L5)

## Emitter.listeners(event)

Returns an array of event listeners or false if not listener exists.

## Emitter.addListener(event, listener)

Add listener to event listeners.

## Emitter.removeListener(event, listener)

Remove listener from event listeners.  
Emitter.removeListener(event) will removes all registered listeners for event.  
Emitter.off() will remove all registereds listeners for all events.

## Emitter.callListeners(event, ...)

Call event listeners with supplied arguments.

## Emitter.applyListeners(event, args)

Call event listeners with args.

## Emitter.addVolatileListener(event, listener)

Same as [Emitter.addListener()](emitteraddlistenerevent-listener) except the listener will be removed from event listeners before beeing called.  

```javascript
var Emitter = require('emitter');
var listeners = function(){
  console.log(Emitter.listeners('event'));
};

Emitter.addVolatileListener('event', listener);
Emitter.callListeners('event');
// logs: false
```

## event

An event is a string without spaces or a number.

## listener

Listener can be a function.

```javascript
var Emitter = require('Emitter');
var listener = function(){
  console.log(arguments);
};
Emitter.addListener('event', listener).callListeners('event', 'hello', 'world');
// logs: ['hello', 'world']
```

Listener can be an object with a handleEvent(event, args, emitter) method.  

```javascript
var Emitter = require('Emitter');
var listener = {
  handleEvent: function(name, args, object){
    console.log(this === listener, name, args, object);
  }
};

Emitter.addListener('event', listener).callListeners('event', 'hello', 'world');
// logs: true, 'event', ['hello', 'world'], Emitter
```

## eventArgumentAPI

This API is used by [on()](#emitteronevent-listener), [off()](#emitteroffevent-listener), [once()](#emitteronceevent-listener) and [emit()](#emitteremitevent-).   
It uses Spaced String, Array, and Object to manipulate multiple event.  

```javascript
var Emitter = require('emitter');
var listener = function(){};
var otherlistener = function(){};

// Spaced String will add listener to both 'eventA' and 'eventB'
Emitter.on('eventA eventB', listener);
// Array will add listener to both 'eventA' and 'eventB'
Emitter.on(['eventA', 'eventB', listener];
// Object will add listener to 'eventA' and otherlistener to 'eventB'
Emitter.on({
  eventA: listener,
  eventB: otherlistener
});
```

Please, note emit() special case with object notation: it's weird and should be avoided.

```javascript
// Array notation will call 'eventA' and 'eventB' listeners with args ['firstArgument', 'secondArgument']
Emitter.emit(['eventA', 'eventB'], 'firstArgument', 'secondArgument');
// Object notation can do the same but is weird
Emitter.emit({
  eventA: 'firstArgument',
  eventB: 'firstArgument'
}, 'secondArgument');
```

## Emitter.on(event, listener)

Call [Emitter.addListener](#emitteraddlistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).

## Emitter.off(event, listener)

Call [Emitter.removeListener](#emitterremovelistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).

## Emitter.once(event, listener)

Call [Emitter.addVolatileListener](#emitteraddvolatilelistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).  

## Emitter.emit(event, ...)

Call [Emitter.callListeners](#emittercalllistenersevent-) using [eventArgumentAPI](#eventArgumentAPI).  

## Internal events

There is four internal events: [addListener](#addlistener-internal-event), [removeListener](#removelistener-internal-event), [wildcard](#wildcard-internal-event).

## addListener internal event

Called each time a listener is added, your listener will receive (eventName, addedListener) as arguments.

## removeListener internal event

Called each time a listener is removed, your listener will receive (eventName, removedListener) as arguments.

## wildcard internal event

Called each time a listener is called, except for 'addListener', 'removeListener' and '*' event. Your listener will receive (eventName, args) as arguments.

## Emitter.bind

TODO


