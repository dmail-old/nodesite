Emitter
=============

Emit and listen events

## Example

```javascript
var emitter = require('Emitter').new();
var readListener = function(){};

// add listener
emitter.on('read', readListener);
// remove listener
emitter.off('read', readListener);
// add volatile listener
emitter.once('read', readListener);
// call listeners
emitter.emit('read', 'hello', 'world');
// apply listeners
emitter.applyListeners('read', ['hello', 'world']);
// get listeners
emitter.listeners('read');

// add listener for each added listener
emitter.on('addListener', function(event, listener){});
// add listener for each removed listener
emitter.on('removeListener', function(event, listener){});
// add listener for all events
emitter.on('*', function(event, args){});
```

## Requirements:

- [proto](../proto)

## getNotifier(event)

Returns or create a notifier object holding the listeners for event.

## addListener(event, listener)

Add listener to event listeners.

## removeListener(event, listener)

Remove listener from event listeners.  
Emitter.removeListener(event) will removes all registered listeners for event.  
Emitter.off() will remove all registereds listeners for all events.

## callListeners(event, ...)

Call event listeners with supplied arguments.

## applyListeners(event, args)

Call event listeners with args.

## addVolatileListener(event, listener)

Same as [Emitter.addListener()](#emitteraddlistenerevent-listener) except the listener will be removed from event listeners before beeing called.  

```javascript
var Emitter = require('emitter');
var listeners = function(){
  console.log(Emitter.listeners('event'));
};

Emitter.addVolatileListener('event', listener);
Emitter.callListeners('event');
// logs: false
```

## event

An event is a string without spaces or a number.

## listener

Listener can be a function.

```javascript
var Emitter = require('Emitter');
var listener = function(){
  console.log(arguments);
};
Emitter.addListener('event', listener).callListeners('event', 'hello', 'world');
// logs: ['hello', 'world']
```

Listener can be an object with a handleEvent(args) method.  

```javascript
var Emitter = require('Emitter');
var listener = {
  handleEvent: function(args){
    console.log(this, args);
  }
};

Emitter.addListener('event', listener).callListeners('event', 'hello', 'world');
// logs: Listener, ['hello', 'world']
```

## eventArgumentAPI

This API is used by [on()](#emitteronevent-listener), [off()](#emitteroffevent-listener), [once()](#emitteronceevent-listener) and [emit()](#emitteremitevent-).   
It uses Spaced String, Array, and Object to manipulate multiple event.  

```javascript
var Emitter = require('emitter');
var listener = function(){};
var otherlistener = function(){};

// Spaced String will add listener to both 'eventA' and 'eventB'
Emitter.on('eventA eventB', listener);
// Array will add listener to both 'eventA' and 'eventB'
Emitter.on(['eventA', 'eventB', listener];
// Object will add listener to 'eventA' and otherlistener to 'eventB'
Emitter.on({
  eventA: listener,
  eventB: otherlistener
});
```

Please, note emit() special case with object notation: it's weird and should be avoided.

```javascript
// Array notation will call 'eventA' and 'eventB' listeners with args ['firstArgument', 'secondArgument']
Emitter.emit(['eventA', 'eventB'], 'firstArgument', 'secondArgument');
// Object notation can do the same but is weird
Emitter.emit({
  eventA: 'firstArgument',
  eventB: 'firstArgument'
}, 'secondArgument');
```

## on(event, listener)

Call [Emitter.addListener](#emitteraddlistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).

## off(event, listener)

Call [Emitter.removeListener](#emitterremovelistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).

## once(event, listener)

Call [Emitter.addVolatileListener](#emitteraddvolatilelistenerevent-listener) using [eventArgumentAPI](#eventArgumentAPI).  

## emit(event, ...)

Call [Emitter.callListeners](#emittercalllistenersevent-) using [eventArgumentAPI](#eventArgumentAPI).  

## Internal events

There is four internal events: [addListener](#addlistener-internal-event), [removeListener](#removelistener-internal-event), [wildcard](#wildcard-internal-event).

## addListener internal event

Called each time a listener is added, your listener will receive (eventName, addedListener) as arguments.

## removeListener internal event

Called each time a listener is removed, your listener will receive (eventName, removedListener) as arguments.

## wildcard internal event

Called each time a listener is called, except for 'addListener', 'removeListener' and '*' event.  
Your listener will receive (eventName, args) as arguments.

## bind

Emitter.bind will be the value of this when a function listener is called.  
By default it's the emitter himself.

```javascript
var Emitter = require('emitter');
var listener = function(){ console.log(this); };

Emitter.on('event', listener);

Emitter.emit('event');
// logs: Emitter
Emitter.bind = 'yo';
Emitter.emit('event');
// logs: 'yo'
```
