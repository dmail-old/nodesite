var Iterator = require('./Iterator');

var StringIterator = function(string){
	return Iterator.call(this, string, true);
};

var proto = {
	constructor: StringIterator,

	__getKeys: function(string){
		return string;
	},

	__nextKey: function(){
		var key = this.__keys__[this.__index__++], code;

		if( this.__index__ < this.__keys__.length ){
			code = key.charCodeAt(0);
			if( (code >= 0xD800) && (code <= 0xDBFF) ) key+= this.__keys__[this.__index__++];
		}

		return key;
	},

	toString: function(){
		return '[object StringIterator]';
	}
};

StringIterator.prototype = Object.create(Iterator);
require('keys').implement(StringIterator.prototype, proto);

module.exports = StringIterator;