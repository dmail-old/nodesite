/**
ceci va disparaitre, ou du moins ne pas rester sous cette forme
*/

module.exports = {
	Template: require('../StringTemplate').extend({
		PropertyPath: require('../PropertyPath'),
		open: '{',
		close: '}',
		cache: {},

		replacer: function(data, token){
			var path = this.PropertyPath.new(token).setModel(data), value;

			// dont replace {{name}} when name does not exists in this
			if( path.has() ){
				value = path.value;
				return value == null ? '' : value;
			}
			return this.empty(token);
		}
	}),

	render: function(string, object){
		return this.Template.new(string).render(object);
	}
};

String.implement('render', function(object){
	return module.exports.render(this, object);
});