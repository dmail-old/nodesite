/**
ceci va disparaitre, ou du moins ne pas rester sous cette forme
*/

var PathAccessor = PathAccessor;
var Template = require('stringTemplate').extend({
	open: '{{',
	close: '}}',
	cache: {},

	replacer: function(data, token){
		var path = PathAccessor.new(token).setModel(data), value;

		// dont replace {{name}} when name does not exists in this
		if( path.has() ){
			value = path.get();
			return value == null ? '' : value;
		}
		return this.empty(token);
	}
});

String.implement('render', function(object){
	return Template.new(this).render(object);
});