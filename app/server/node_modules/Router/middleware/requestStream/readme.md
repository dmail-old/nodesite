requestStream
=============

Extend request to handle following headers: length, encoding, charset, md5 and body charset.

## Example

```javascript
router.use('requestStream');
router.use(function(router, error){
  var request = router.request, stream = request.stream;
  
  stream.resolve();
  stream.on('error', function(error){
     /* error is one of the following
    abortedError: request has been aborted
    toolargeError: request content-length > request.maxLength
    badSizeError: request body length != request content-length header
    badDigestError: request body md5 != request content-md5 header
    unsupportedEncodingError: request content-encoding not supported
    unsupportedCharsetError: request content-type header unsupported with the specified charset
    */
  });
  
  stream.on('data', function(chunk){
    // chunk is buffer always unencoded and in utf8
  });
  
});


```

## Requirements

- ChangeStream

## request.defaultEncoding

Default encoding when request has not content-encoding header. Default: 'encoding'

## request.defaultCharset

Default encoding when request has not content-type header or content-type header did not specify charset. Default: 'utf8'

## request.maxLength

Max number of bytes autorised for this request.

## request.bytesLimit

Alias of request.maxLength.

## request.bytesReceived

Current bytesReceived for this request body.

## request.bytesExpected

bytesExpected for this request body, default to request content-length header

## request.length

Returns request content-length header value.

## request.encoding

Encoding of request body. Default to content-encoding header, else defaultEncoding.

## request.hasBody()

Returns if request has a body. Request has no body if content-length is zero, request.method is head.

## request.stream

Returns the instance of ChangeStream used by request to read its body.

## progress event

You can listen for 'progress' event on request. You function will receive bytesReceived, bytesExpected as argument while request body is readed.

## Undocumented properties

- isTooLarge(byteCount)
- createAbortedError()
- createUnsupportedEncodingError(encoding)
- createUnsupportedCharsetError(charset)
- createTooLargeError(received, limit)
- createBadSizeError(received, expected)
- createBadDigestError(digest, expected)
- initStream()
- createStream()
