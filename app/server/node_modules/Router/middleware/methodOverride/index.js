module.exports = {
	request: {
		originalMethod: null,

		getMethod: function(){
			var method = this.params['_method'];

			if( !method ) method = this.getHeader('x-http-method-override');

			if( method ){
				method = method.toUpperCase();
			}
			else{
				method = this.method;
			}

			return method;
		},

		checkMethod: function(){
			this.originalMethod = this.method;
			this.method = this.getMethod();
		}
	},

	handle: function(request, response, handler){
		request.checkMethod();
		handler.next();
	}
};