var File = require('./File');
//File.aliases.push(require('./GzipAlias'));

module.exports = {
	response: {
		modifiedSinceHeaderName: 'if-modified-since',

		sendFile: function(path){
			var file = File.new(path, this.request.getHeader(this.modifiedSinceHeaderName));
			file.generate(function(data){
				if( data instanceof Error ){
					this.error(data);
				}
				else{
					this.populate(data);
				}
			}.bind(this));
		}
	},

	// this here is router not FileHandler
	handle: function(router){
		if( router.request.is('head', 'get') ){
			router.response.sendFile(global.CLIENT_PATH + router.request.url.pathname);
		}
		else{
			router.next();
		}
	}
};