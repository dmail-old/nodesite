var File = require('./File');
//File.aliases.push(require('./GzipAlias'));

module.exports = {
	response: {
		modifiedSinceHeaderName: 'if-modified-since',

		sendFile: function(path){
			var file = File.new(path, this.request.getHeader(this.modifiedSinceHeaderName));
			file.generate(function(data){
				if( data instanceof Error ){
					this.error(data);
				}
				else{
					this.populate(data);
				}
			}.bind(this));
		}
	},

	// this here is router not FileHandler
	handle: function(request, response, handler){
		if( request.is('head', 'get') ){
			response.sendFile(global.CLIENT_PATH + request.url.pathname);
		}
		else{
			handler();
		}
	}
};