/*



*/

var Path = require('path');
var GZIPAlias = {
	constructor: function(fileHandler){
		this.fileHandler = fileHandler;
	},

	handle: function(){
		var extension = Path.extname(this.fileHandler.path);
		return (extension == '.js' || extension == '.css') && this.fileHandler.router.request.acceptEncoding('gzip');
	},

	getPath: function(path){
		return path + '.gz';
	},

	found: function(){
		var response = this.fileHandler.router.response;

		// specifiy the body is already gzip encoded
		response.bodyEncoding = 'gzip';
		// force response to be gzip encoded (it will just set header as body is already gzip encoded)
		response.encoding = 'gzip';	
	}
};

module.exports = GZIPAlias;