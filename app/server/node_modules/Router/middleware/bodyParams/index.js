module.exports = {
	request: {
		parsers: require('./parsers'),
		bodyParams: null
	},

	handle: function(router){
		var request = router.request, stream = request.stream, mediaType;

		if( stream ){
			mediaType = request.mediaType;

			if( mediaType in request.parsers ){
				request.parsers[mediaType](stream, function(error, params){
					if( error ){
						router.error(error);
					}
					else{
						request.bodyParams = params;
						router.next();
					}
				});
			}
		}
	}
};