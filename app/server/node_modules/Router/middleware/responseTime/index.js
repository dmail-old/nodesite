module.exports = {
	name: 'responseTime',

	response: {
		startTime: null
	},

	handle: function(request, response, handler){
		response.startTime = new Date();
		response.on('beforeSendingHeaders', function(){
			this.setHeader('x-response-time', new Date() - this.startTime);
		});
		handler.next();
	}
};