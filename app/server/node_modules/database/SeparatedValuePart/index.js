var Part = require('../FileTemplate/Part');
var SeparatedValuePart = Part.extend({
	delimiter: ',', // could be '\t'
	escape: '\\',
	quote: '"', // could be "'"
	headers: null,

	parse: function(string){
		// c'est pas aussi simple mais en gros c'est ça
		return string.split(this.delimiter);
	},

	stringify: function(object){
		if( !object instanceof Array) ){
			var keys = Object.getOwnPropertyNames(object), i = 0, j = keys.length, values = [];

			for(;i<j;i++){
				values.push(object[keys[i]]);
			}

			object = values;
		}

		// c'est pas aussi simple mais en gros c'est ça
		return values.join(this.delimiter);
	},

	toObject: function(){
		if( this.headers ){
			var values = this.parsed, i = 0, j = this.values.length, object = {};

			for(;i<j;i++){
				object[this.headers[i]] = values[i];
			}

			return object;
		}
		else{
			return this.parsed;
		}
	}
});

module.exports = SeparatedValuePart;