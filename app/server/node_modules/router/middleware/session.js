module.exports = {
	request: {
		user: null,
		cookieSession: 'session'
	},

	handle: function(){
		var request = this.request;
		var session = request.cookieParams[request.cookieSession];

		if( !session ) return this.next();

		request.user = DB.find('user', 'session:' + session, function(error, user){
			if( error ){
				this.next(error);
			}
			else{
				request.user = user;
				this.next();
			}
		}, request);
	}
};