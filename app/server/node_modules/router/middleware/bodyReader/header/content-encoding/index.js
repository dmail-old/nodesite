var RequestHeader = require('./requestHeader');
var ContentEncodingHeader = RequestHeader.extend({
	name: 'content-encoding',
	errorStatusCode: 415,
	errorMessage: 'Unsupported {headerName}:{headerValue} request header. Supported values: {supporteds}',

	getValue: function(bodyReader){
		return bodyReader.request.encoding;
	},
	
	createError: function(){
		return RequestHeader.createError.call(this, this.errorStatusCode, this.errorMessage, {
			supporteds: this.bodyStream.supporteds('encoding')
		});
	},	

	isValid: function(){
		return this.bodyStream.support('encoding', this.value);
	},

	effect: function(){
		this.bodyStream.setEncoding(this.value);
	}
});

module.exports = ContentEncodingHeader;