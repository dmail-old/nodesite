var RequestHeader = require('./requestHeader');
var ContentMD5Header = RequestHeader.extend({
	name: 'content-md5',
	errorMessage: 'Bad digest error: Request {headerName} header did not match md5: {headerValue} != {digest}',
	errorStatusCode: 400, // bad request

	effect: function(){
		this.bodyStream.setHash(require('crypto').createHash('md5').setEncoding('base64'), this.value);

		/*
		hashVerifiedStream.createBadDigestError = function(digest){
			return this.createError(this.errorStatusCode, this.errorMessage, {
				digest: digest
			});
		}.bind(this);
		*/
	}
});

module.exports = ContentMD5Header;