module.exports = {
	name: 'session',

	task: function(handler){
		var request = handler.request;

		if( request.hasCookie('session') ){
			return handler.database.find('user', 'session:' + request.getCookie('session')).then(function(user){
				request.user = user;
			});
		}
	}
};