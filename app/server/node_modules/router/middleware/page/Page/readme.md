Page
=============

A page is responsible to produce a response to a request;

## Requirements

NONE

## Page.new(path)

Returns an instance of Page

## Page.getArguments()

Return an array of arguments computed from request.bodyParams or request.urlParams.

## Page.path

Path of the page, set when calling Page.new()

## Page.module

Module of the page, set when calling page.compile()

## Page.args

Return the result of page.getArguments(), set when calling page.compile()

## Page.access

[TODO] Control access to this page

## Page.getHandler(module)

Depending on the module structure returns the function responsible to handle the request.

```javascript
// this function will handle all request type
module.exports = function(page){
	
};
// equivalent to
module.exports = {
	'*': function(page){}
};

module.exports = {
	// this function will handle all GET request
	'GET': function(page){},

	// this function will handle all POST request
	'POST': function(page){},

	// this function will handle all other request
	'*': function(page){}
};

// TODO
module.exports = {
	'GET': {
		// this function will handle GET request with a pathname matching '.*?/edit'
		'{id}/edit': function(page, id){},	
		// this function will handle other GET requests
		'*': function(page){}
	}
}
```

## Page.compile()

Set page.module = require(page.path). May throw MODULE_NOT_FOUND error or SYNTAX_ERROR
Set page.handler = page.getHandler(module)
If no handler is found throw ROUTE_NOT_FOUND error
Set page.args = page.getArguments(handler)
Set page.access = page.Access.new(page.path)
If access is refused throw page.access.error

## Page.execute(fn)

fn(error, data) will receive error relative to the execution of page.handler and data if page.send was called.

## Page.getTemplatePath(path)

Return a path where a template for this page could be found.

```javascript
getTemplatePath('index.page'); // html/index.page
getTemplatePath('folder/index.page'); // folder/html/index.page
```

## Page.createTemplate(path)

Returns an HTML template file linked with this page.  
If path not given it will be set to page.getTemplatePath(page.path).

## Page.send(data)

Will call page.callback with data

## Undocumented properties

- Page.createRouteNotFoundError()
- Page.createArgumentsLengthError()