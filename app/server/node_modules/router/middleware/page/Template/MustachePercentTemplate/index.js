var proto = require('proto');
var StringTemplate = require('StringTemplate');

var Compiler = StringTemplate.prototype.Compiler;

// le client utilise {{}}}, le template par defaut utilise {}, donc pour le serveur on utilise encore 
// un signature diff√©rent : {%%}
var MustacheCompiler = Object.create(Compiler);

proto.define(MustacheCompiler, {
	regex: /{%([A-Za-z]?[A-Za-z0-9]*)%}/g,
	open: '{%',
	close: '%}'
});

var MustachePercentTemplate = proto.extend(StringTemplate, {
	Compiler: MustacheCompiler
});

module.exports = MustachePercentTemplate;