var Request = require('../request');

exports['request method override'] = function(test, RequestMethodPlugin){
	var CustomRequest = Request.extendProto(RequestMethodPlugin);
	var requestA = CustomRequest.create();
	var requestB = CustomRequest.create();
	var requestC = CustomRequest.create();

	requestA.resolve({
		method: 'GET',
		params: {},
		headers: {
			'x-http-method-override': 'post'
		}
	});

	requestB.resolve({
		method: 'post',
		params: {
			'_method': 'GET'
		}
	});

	test.resolveTo(requestA.ready().then(function(){ return requestA.originalMethod + requestA.method; }), 'getpost');
	test.resolveTo(requestB.ready().then(function(){ return requestB.originalMethod + requestB.method; }), 'postget');
};