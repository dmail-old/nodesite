exports['test plugins'] = function(test, Request){
	var request = Request.create();
	var fooPlugin = {name: 'foo'};

	request.addPlugin(fooPlugin);
	test.equal(request.hasPlugin('foo'), true);
	test.equal(request.getPlugin('foo'), fooPlugin);
	request.removePlugin('foo');
	test.equal(request.hasPlugin('foo'), false);
};

exports['resolve() fullfill the request.ready() promise'] = function(test, Request){
	var request = Request.create();

	request.resolve();	
	test.willResolve(request.ready());	
};

exports['stream can be consumed multiple times'] = function(test, Request){
	var request = Request.create();

	request.resolve({
		body: 'hello world'
	});

	test.willBe(request.consume().then(String), 'hello world');
	test.willBe(request.consume().then(String), 'hello world');
};
