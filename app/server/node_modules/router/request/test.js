/*
this test belongs to the factory module
exports['plugins are not shared'] = function(test, Request){
	var fooPlugin = {name: 'foo'};
	var factory = Request.createFactory(fooPlugin);
	var request = factory.create();

	test.equal(factory.plugins.length, 0);
	test.equal(request.plugins.length, 1);
	test.equal(factory.plugins.length, 1);
};
*/

exports['resolve() fullfill the request.ready() promise'] = function(test, Request){
	var request = Request.create();

	request.resolve();
	test.willResolve(request.ready());
};

exports['stream can be consumed multiple times'] = function(test, Request){
	var request = Request.create();

	request.resolve({
		body: 'hello world'
	});

	test.willBe(request.consume().then(String), 'hello world');
	test.willBe(request.consume().then(String), 'hello world');
};
