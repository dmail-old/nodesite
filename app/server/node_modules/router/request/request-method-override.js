function getMethod(request){
	var method = request.params['_method'];

	if( !method ) method = request.getHeader('x-http-method-override');

	if( method ){
		method = method.toLowerCase();
	}
	else{
		method = request.method;
	}

	return method;
}

module.exports = {
	name: 'request-method-override',
	dependencies: ['request-params'],

	task: function(){
		var request = this;

		request.originalMethod = request.method;
		request.method = getMethod(request);
	}
};