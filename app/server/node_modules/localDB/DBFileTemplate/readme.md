## DBFileTemplate

Extend [FileTemplate](../FileTemplate) to manipulate dabatase files.  
Currently it only support JSON format but the CSV format and the API to specify the format is under development.

## Example

TODO

## Requirements

- [FileTemplate](../FileTemplate)
- Selector
- [JSONPart](../JSONPart)

## partPrototype

## findPart(selector)

Return the first part matching selector.

## updatePart(part, fields, callback, bind)

update part properties using fields and reply with callback.  

```javascript
dbFileTemplate.updatePart(dbFileTemplate.parts[0], {foo: 'boo'}, function(error, updatedPart){

});
```

## find(selector, callback, bind)

Search for a part matching selector and reply with callback.

```javascript
dbFileTemplate.find('foo:boo', function(error, part){

});
```

## insert(fields, callback, bind)

Create a part from fields and write it into the file.

```javascript
dbFileTemplate.insert({name: 'damien'}, function(error, item){
  item.name; // 'damien'
});
```

## update(selector, fields, callback, bind)

Update the first part matching selector with fields values and reply with callback.

```javascript
dbFileTemplate.update('name:damien', {name: 'dam'}, function(error, item){
  // error is set if no part matched the selector
  // item is the updated item
});
```

## remove(selector, callback, bind)

Remove the first part matching selector and reply with callback.

```javascript
dbFileTemplate.remove('name:dam', function(error, item){
  // error is set if no part matched the selector
  // item is the item removed
});
```

## findAll(selector, callback, bind)

find every part matching selector and reply with callback an error or an array of items.

## updateAll(selector, fields, callback, bind)

update every part matching selector with fields values and reply with callback an error or an array of update items.

## removeAll(selector, callback, bind)

remove every part matching selector and reply with callback an error or an array of removed items.

## drop(callback, bind)

Remove the file from the fileSystem.

## Undocumented internal properties

- partPrototype
- noop(callback, bind)
- notfound(callback, bind, selector)
- compare(key, a, b)
- callWhenReaded(fn)
