module.exports = {
	name: 'session',

	request: {
		user: null,
	},

	handle: function(handler){
		var request = handler.request;

		var session = request.cookieParams['session'];
		if( !session ) return;
		return this.database.find('user', 'session:' + session).then(function(user){
			request.user = user;
		});
	}
};