module.exports = {
	name: 'responseTime',

	response: {
		startTime: null
	},

	handle: function(handler){
		var response = handler.response;
		response.startTime = new Date();
		response.on('beforeSendingHeaders', function(){
			this.setHeader('x-response-time', new Date() - this.startTime);
		});
	}
};