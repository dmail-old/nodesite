Response
=============

Wrap [http.serverResponse](http://nodejs.org/api/http.html#http_class_http_serverresponse) to add helpers.

## Example

```javascript
function listener(req, res){
	
}
http.createServer(listener).listen(1337, '127.0.0.1');
http.request({
	path: 'index.html?page=12',
	port: 1337,
	host: '127.0.0.1'
});
```

## Requirements

- [proto](../../../../node_modules/proto)

## wait(fn, bind)

Calls to response.end() & response.write() are intercepted until some operations are over.

```javascript
response.wait(function(done){
	response.setHeader('x-whatever', 10);
	setTimeout(done, 10); // in 10ms it will do nothing
});
response.wait(function(done){
	setTimeout(done, 100); // in 100ms it will send headers and body
});

response.write('Hello'); // wait will prevent headers & body to be sent 
response.end();
```

## 'write' event

The write event is emmited for each call to response.write() even if response is waiting.

## 'end' event

The end event is emmited when response.end() is called even if response is waiting.

## 'beforeSendingHeaders' event

This event is sent if response.writeHead() was never called and response.write() is called.  
It's perfect to set some headers before sending the response body.

## hasHeader(name)

Returns if the header has been set.

## send(status, body, encoding)

Equivalent to response.writeHead(status) followed by response.end(body, encoding)

## toString()

Returns a string representation of this response
